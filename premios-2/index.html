<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <title>Raspadinha AÃ§aÃ­</title>
  <style>
    body {
      background: #4b0082;
      color: #fff;
      font-family: Arial, sans-serif;
      text-align: center;
      margin: 0;
      padding: 20px;
    }
    h1 {
      color: #ffcc00;
    }
    .scratch-container {
      margin: 20px auto;
      width: 320px;
    }
    .scratch-area {
      position: relative;
      width: 300px;
      height: 120px;
      margin: 0 auto 20px auto;
      background: #aaa;
      border-radius: 12px;
      cursor: pointer;
    }
    .prize-grid {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 15px;
      margin-top: 20px;
      justify-items: center;
    }
    .prize {
      background: #ffcc00;
      color: #4b0082;
      font-weight: bold;
      padding: 15px;
      border-radius: 12px;
      width: 120px;
      text-align: center;
    }
    .hidden {
      display: none;
    }
  </style>
</head>
<body>
  <h1>ðŸŽ‰ Raspadinha AÃ§aÃ­ ðŸŽ‰</h1>
  <p>Raspe a Ã¡rea cinza para descobrir seu prÃªmio!</p>

  <div class="scratch-container">
    <canvas id="scratch" class="scratch-area"></canvas>
    <div id="prizeText" class="hidden"></div>
  </div>

  <div class="prize-grid">
    <div class="prize">1 AÃ§aÃ­<br>300ml</div>
    <div class="prize">1 AÃ§aÃ­<br>400ml</div>
    <div class="prize">1 Pastel<br>Tradicional</div>
    <div class="prize">1 Pastel<br>Gourmet</div>
    <div class="prize">NÃ£o foi<br>dessa vez</div>
  </div>

  <script>
    const prizes = [
      "1 AÃ§aÃ­ de 300ml",
      "1 AÃ§aÃ­ de 400ml",
      "1 Pastel Tradicional",
      "1 Pastel Gourmet",
      "NÃ£o foi dessa vez"
    ];

    const canvas = document.getElementById("scratch");
    const ctx = canvas.getContext("2d");
    canvas.width = 300;
    canvas.height = 120;

    // Pintar Ã¡rea cinza inicial
    ctx.fillStyle = "#aaa";
    ctx.fillRect(0, 0, canvas.width, canvas.height);

    let isDrawing = false;
    const prizeText = document.getElementById("prizeText");

    // Controle de raspadas com localStorage
    let plays = localStorage.getItem("raspadinhaPlays") || 0;
    plays = parseInt(plays);

    let prize;
    if (plays === 4) {
      prize = "ðŸŽ‰ ParabÃ©ns! VocÃª ganhou 1 AÃ§aÃ­ de 300ml ðŸŽ‰";
    } else {
      prize = prizes[Math.floor(Math.random() * prizes.length)];
    }

    function showPrize() {
      prizeText.classList.remove("hidden");
      prizeText.innerHTML = `<h2>${prize}</h2>`;
    }

    function scratch(e) {
      if (!isDrawing) return;
      const rect = canvas.getBoundingClientRect();
      const x = (e.touches ? e.touches[0].clientX : e.clientX) - rect.left;
      const y = (e.touches ? e.touches[0].clientY : e.clientY) - rect.top;
      ctx.globalCompositeOperation = "destination-out";
      ctx.beginPath();
      ctx.arc(x, y, 15, 0, Math.PI * 2);
      ctx.fill();
    }

    canvas.addEventListener("mousedown", () => isDrawing = true);
    canvas.addEventListener("mouseup", () => isDrawing = false);
    canvas.addEventListener("mousemove", scratch);

    canvas.addEventListener("touchstart", () => isDrawing = true);
    canvas.addEventListener("touchend", () => isDrawing = false);
    canvas.addEventListener("touchmove", scratch);

    // Revelar prÃªmio ao soltar
    canvas.addEventListener("mouseup", () => {
      showPrize();
      localStorage.setItem("raspadinhaPlays", plays + 1);
    });
    canvas.addEventListener("touchend", () => {
      showPrize();
      localStorage.setItem("raspadinhaPlays", plays + 1);
    });
  </script>
</body>
</html>
